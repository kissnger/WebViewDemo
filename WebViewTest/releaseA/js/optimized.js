require.config({baseUrl:"js/libs/",paths:{js:"../js",libs:"./",services:"../services"},shim:{"*":["js/config"],chart:{exports:"Chart"},zepto:{exports:"$"},mobiscroll_002:["zepto"],mobiscroll:["mobiscroll_002"]}}),define("config",function(){}),require(["config"],function(){require(["libs/chart","libs/utily","../json/mainService"],function(a,b,c){function d(){c.fetchRestaurants(function(a){if(a.isSuccess){var b,d=a.data,f=document.querySelector(".hide-restItem"),i="";if(d){for(var j=0,k=d.length;k>j;j+=1)c.hotelId==d[j].hotelId&&(b=d[j].hotelName),f.innerHTML='<a class="link-name" href="/index.html?hotelId='+d[j].hotelId+'">'+d[j].hotelName+"</a>",f.setAttribute("hotelId",d[j].hotelId),i+=f.outerHTML;g.innerHTML=i,h.innerText=b||d[0].hotelName,h.setAttribute("hotelId",c.hotelId||d[0].hotelId),e()}}})}function e(){c.fetchBusiStatis(function(a){if(a.isSuccess){var b=a.data;b?(document.querySelector(".main-menuwrap").style.display="block",document.querySelector(".no-index-data").style.display="none",document.querySelector(".daily-money").innerText="￥"+f(b.todayBusiness,2),document.querySelector("#js_percost").innerText="￥"+f(b.avgConsumByCustomer,2),document.querySelector("#js_perorder").innerText="￥"+f(b.avgConsumByOrder,2),document.querySelector("#js_freeorder").innerText=b.freeOrderNum||"0",document.querySelector("#js_realTable").innerText=b.openedTableNum+"/"+b.tableSum,document.querySelector(".menu-except").style.display="block",document.querySelector(".menu-table").style.display="block"):(document.querySelector(".main-menuwrap").style.display="none",document.querySelector(".no-index-data").style.display="block",document.querySelector(".daily-money").innerText="￥0",document.querySelector("#js_percost").innerText="￥0",document.querySelector("#js_perorder").innerText="￥0")}},h.getAttribute("hotelId"))}var f=b.toFixed,g=document.querySelector(".hide-restList"),h=document.querySelector(".rest-name"),i=(document.querySelector(".main-restaurant"),document.querySelector(".mask")),j=document.querySelector(".main-menuwrap"),k={except:"abnormalsum.html",report:"dailyBusiness.html",realTab:"realTableStatus.html",morningNews:"morningNews.html"},l=0,m=0;h.addEventListener("touchstart",function(a){i.style.display="block",g.style.display="block"},!1),document.querySelector(".icon-downarrow-icon").addEventListener("touchstart",function(a){i.style.display="block",g.style.display="block"},!1),document.querySelector(".yesterday-btn").addEventListener("touchend",function(){var a=h.getAttribute("hotelId"),b=Date.now(),c=b-b%864e5-864e5-288e5;window.location.href="/dailyBusiness.html?hotelId="+a+"&startTime="+c}),i.addEventListener("touchstart",function(){i.style.display="none",g.style.display="none"},!1),j.addEventListener("touchstart",function(a){l=a.touches[0].pageY}),j.addEventListener("touchmove",function(a){m=a.touches[0].pageY}),j.addEventListener("touchend",function(a){if(Math.abs(m-l)>5&&0!==m)return void(m=0);for(var b=a.target.parentNode;b;){if(1==b.nodeType){if(b.className.indexOf("menu-item")>-1&&(b.style.backgroundColor="#31343c"),b.getAttribute("att_type")){var c=b.getAttribute("att_type");if(k[c])return void(window.location.href=k[c]+"?hotelId="+h.getAttribute("hotelId"))}b.className.indexOf("menu-item")>-1&&(b.style.backgroundColor="#272a33")}b=b.parentNode}return!1}),d()})}),define("js/main",function(){});
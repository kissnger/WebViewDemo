define(function(){function a(a){var b=new Date;return 0!==a.indexOf("~")&&(a=a.split("~")[0]),a=a.split("-"),b.setFullYear(Number(a[0])),a[1]?b.setMonth(Number(a[1])-1):b.setMonth(0),a[2]?b.setDate(Number(a[2])):b.setDate(1),b.setHours(23,59,0,0),b.getTime()}function b(a,b){var e=new Date(a),g=new Date(a+6*f),h=e.getFullYear(),i=d(e),j=c(e);if("m"==b)return h+"-"+i;if("w"==b){var k=h+"-"+i+"-"+j+"~"+g.getFullYear()+"-"+d(g)+"-"+c(g);return k}return"y"==b?h:"d"==b?h+"-"+i+"-"+j:void 0}function c(a){return a.getDate()<=9?"0"+a.getDate():a.getDate()}function d(a){return a.getMonth()+1<=9?"0"+(a.getMonth()+1):String(a.getMonth()+1)}var e={},f=864e5;return e.date=function(c){var d,e=document.querySelector(".px_date_input"),g=e.value,h=a(g),i=document.querySelector(".date_select_item"),j=i.getAttribute("type");if("date"==j)d=h+f*c,e.value=b(d,"d");else if("week"==j)d=h+7*f*c,e.value=b(d,"w");else if("month"==j){var k=new Date(h).getMonth()+1,l=new Date;d=Number(k)+c,l.setFullYear(new Date(h).getFullYear(),d-1,1),l.setHours(23,59,0,0),e.value=b(l.getTime(),"m"),d=l.getTime()}else if("year"==j){var m=new Date(h).getFullYear(),l=new Date;d=Number(m)+c,e.value=d,l.setFullYear(d,0,1),l.setHours(23,59,0,0),d=l.getTime()}return d},e});